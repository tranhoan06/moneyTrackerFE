<p-toast />
<form [formGroup]="loginForm" (ngSubmit)="onLogin()">
    <div class="flex flex-col md:flex-row min-h-screen items-center justify-center bg-surface-50 dark:bg-surface-950">
        <div class="w-full max-w-md flex flex-col items-center justify-center gap-4 py-8 px-6 bg-surface-0 dark:bg-surface-900 rounded-lg shadow-lg relative">
            <!-- Loading Overlay -->
            @if (isLoading) {
                <div class="absolute inset-0 bg-surface-0 dark:bg-surface-900 bg-opacity-75 dark:bg-opacity-75 flex items-center justify-center z-50 rounded-lg">
                    <div class="flex flex-col items-center gap-3">
                        <p-progressSpinner [style]="{'width': '50px', 'height': '50px'}" strokeWidth="4" animationDuration=".5s"></p-progressSpinner>
                        <p class="text-surface-900 dark:text-surface-0 font-medium">Đang xử lý...</p>
                    </div>
                </div>
            }

            <div class="flex flex-col gap-2 w-full mb-6">
                <h2 class="text-3xl font-bold text-center text-surface-900 dark:text-surface-0">Đăng Nhập</h2>
            </div>

            <!-- email -->
            <div class="flex flex-col gap-2 w-full">
                <label for="email" class="text-surface-900 dark:text-surface-0 font-medium">Tên đăng nhập</label>
                <input 
                    pInputText 
                    id="email" 
                    type="text" 
                    formControlName="email"
                    placeholder="Nhập tên đăng nhập" 
                    class="w-full"
                    [class.ng-invalid]="f['email'].invalid && f['email'].touched"
                    [disabled]="isLoading"
                />
                @if (f['email'].invalid && f['email'].touched) {
                    <small class="text-red-500">Tên đăng nhập là bắt buộc</small>
                }
            </div>

            <!-- Password -->
            <div class="flex flex-col gap-2 w-full">
                <label for="password" class="text-surface-900 dark:text-surface-0 font-medium">Mật khẩu</label>
                <p-password 
                    id="password" 
                    formControlName="password"
                    placeholder="Nhập mật khẩu" 
                    [toggleMask]="true" 
                    [feedback]="false" 
                    styleClass="w-full" 
                    [style]="{'width': '100%'}"
                    [class.ng-invalid]="f['password'].invalid && f['password'].touched"
                    [disabled]="isLoading"
                ></p-password>
                @if (f['password'].invalid && f['password'].touched) {
                    <small class="text-red-500">Mật khẩu là bắt buộc</small>
                }
            </div>

            <!-- Remember Me -->
            <div class="flex items-center gap-2 w-full">
                <p-checkbox 
                    formControlName="rememberMe"
                    inputId="rememberMe" 
                    binary
                    [disabled]="isLoading"
                ></p-checkbox>
                <label for="rememberMe" class="cursor-pointer text-surface-900 dark:text-surface-0">Ghi nhớ đăng nhập</label>
            </div>

            <!-- Submit Button -->
            <div class="flex w-full mt-2">
                <p-button 
                    label="Đăng Nhập" 
                    icon="pi pi-user" 
                    class="w-full" 
                    styleClass="w-full" 
                    [loading]="isLoading" 
                    type="submit"
                    [disabled]="loginForm.invalid || isLoading"
                />
            </div>

            <!-- Register Link -->
            <div class="flex flex-col gap-2 w-full mt-6">
                <p class="text-center text-sm text-surface-600 dark:text-surface-400">
                    Nếu chưa có tài khoản,
                    <a routerLink="/register" class="text-primary cursor-pointer hover:underline font-medium">bấm vào đây để đăng ký</a>
                </p>
            </div>
        </div>
    </div>
</form>
